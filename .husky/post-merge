#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Post-merge hook for DMOC Web (PWA)
# Automatically updates changelog after merging significant changes

echo "ğŸ”„ Running post-merge checks..."

# Check if this was a merge commit
if [ -n "$(git log -1 --pretty=%B | grep -E '^Merge')" ]; then
  echo "ğŸ“‹ Merge detected, checking for changelog updates..."
  
  # Get commits from the merge
  MERGE_COMMITS=$(git log --oneline --merges -1)
  
  if [ -n "$MERGE_COMMITS" ]; then
    echo "ğŸ” Found merge commit: $MERGE_COMMITS"
    echo "ğŸ’¡ Consider running: npm run changelog:generate"
    echo "   This will automatically generate changelog entries from recent commits"
  fi
fi

echo "âœ… Post-merge checks completed!"
